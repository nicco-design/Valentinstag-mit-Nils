<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentinstag üíò</title>
  <style>
    :root {
      --pink-1: #ff6fa5;
      --pink-2: #ff8fbd;
      --pink-3: #ffd3e4;
      --card-bg: rgba(255, 255, 255, 0.92);
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, Arial, sans-serif;
      min-height: 100vh;
      margin: 0;
      display: grid;
      place-items: center;
      overflow-x: hidden;
      background:
        radial-gradient(circle at 12% 18%, rgba(255, 255, 255, 0.85) 0 26px, transparent 27px),
        radial-gradient(circle at 84% 12%, rgba(255, 255, 255, 0.65) 0 20px, transparent 21px),
        radial-gradient(circle at 78% 78%, rgba(255, 255, 255, 0.55) 0 24px, transparent 25px),
        radial-gradient(circle at 22% 76%, rgba(255, 255, 255, 0.5) 0 22px, transparent 23px),
        linear-gradient(135deg, #fff0f6 0%, var(--pink-3) 35%, var(--pink-2) 100%);
      background-attachment: fixed;
      color: #5b1731;
    }

    .layout {
      width: min(1200px, 100%);
      min-height: 100vh;
      padding: 28px 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: clamp(10px, 3vw, 42px);
      position: relative;
    }

    .card {
      background: var(--card-bg);
      backdrop-filter: blur(6px);
      padding: 32px;
      border-radius: 20px;
      box-shadow: 0 16px 36px rgba(136, 17, 66, .24);
      text-align: center;
      width: min(520px, 92vw);
      border: 1px solid rgba(255, 255, 255, 0.8);
      z-index: 2;
    }

    .polaroid {
      width: clamp(150px, 20vw, 260px);
      background: #fff;
      border-radius: 6px;
      box-shadow: 0 14px 28px rgba(35, 11, 20, 0.28);
      padding: 10px 10px 40px;
      transition: transform .2s ease;
      flex-shrink: 0;
    }

    .polaroid:hover {
      transform: translateY(-4px) rotate(var(--rotation));
    }

    .polaroid img {
      display: block;
      width: 100%;
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: 2px;
      background: #f4f4f4;
    }

    .photo-actions {
      margin-top: 10px;
      text-align: center;
    }

    .photo-actions button {
      background: #ffe8f1;
      color: #5b1731;
      border: 0;
      border-radius: 10px;
      font-size: 13px;
      padding: 8px 10px;
      cursor: pointer;
    }

    .photo-actions small {
      display: block;
      margin-top: 6px;
      color: #7a4a5d;
      font-size: 12px;
    }

    .polaroid.left {
      --rotation: -8deg;
      transform: rotate(-8deg);
    }

    .polaroid.right {
      --rotation: 7deg;
      transform: rotate(7deg);
    }

    h1 { margin: 0 0 8px; font-size: 28px; }
    p { margin: 0 0 22px; font-size: 18px; }
    .btns { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
    button { border: 0; padding: 12px 18px; border-radius: 14px; font-size: 16px; cursor: pointer; transition: transform .15s ease, box-shadow .2s ease; }
    button:hover { transform: translateY(-1px); }
    #yes { background: var(--pink-1); color: white; box-shadow: 0 8px 16px rgba(255, 79, 141, .34); }
    #no { background: #ffe8f1; color: #5b1731; }
    #msg { margin-top: 18px; font-weight: 600; font-size: 18px; }

    .heart-burst {
      position: fixed;
      font-size: clamp(18px, 2.8vw, 36px);
      pointer-events: none;
      z-index: 20;
      animation: pop-heart 2s ease-out forwards;
      transform: translate(-50%, -50%);
    }

    @keyframes pop-heart {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.4);
      }
      15% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.2);
      }
    }

    @media (max-width: 920px) {
      .layout {
        flex-direction: column;
      }

      .polaroid {
        width: min(230px, 65vw);
      }

      .polaroid.left,
      .polaroid.right {
        transform: rotate(0deg);
      }
    }
  </style>
</head>
<body>
  <main class="layout">
    <figure class="polaroid left" data-photo-key="left">
      <img
        data-sources="assets/polaroid-left.jpg|assets/left.jpg"
        alt="Foto von euch beiden mit Feuerwerk"
      />
      <div class="photo-actions" hidden>
        <button type="button">Linkes Foto ausw√§hlen</button>
        <small>W√§hle ein JPG/PNG direkt vom Ger√§t</small>
        <input type="file" accept="image/*" hidden />
      </div>
    </figure>

    <div class="card">
      <h1>Willst du mein Valentinstag-Date sein? üíò</h1>
      <div class="btns">
        <button id="yes">Ja üòç</button>
        <button id="no">Nein üôà</button>
      </div>

      <div id="msg"></div>
    </div>

    <figure class="polaroid right" data-photo-key="right">
      <img
        data-sources="assets/polaroid-right.jpg|assets/right.jpg"
        alt="Spiegel-Selfie von euch beiden"
      />
      <div class="photo-actions" hidden>
        <button type="button">Rechtes Foto ausw√§hlen</button>
        <small>W√§hle ein JPG/PNG direkt vom Ger√§t</small>
        <input type="file" accept="image/*" hidden />
      </div>
    </figure>
  </main>

  <script>
    const yes = document.getElementById("yes");
    const no = document.getElementById("no");
    const msg = document.getElementById("msg");

    const readAsDataUrl = (file) => new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });

    const setupPolaroid = (figure) => {
      const img = figure.querySelector("img");
      const actions = figure.querySelector(".photo-actions");
      const actionBtn = actions.querySelector("button");
      const input = actions.querySelector("input");
      const photoKey = figure.dataset.photoKey;
      const storageKey = `valentine-photo-${photoKey}`;

      const showPicker = () => {
        actions.hidden = false;
      };

      const hidePicker = () => {
        actions.hidden = true;
      };

      const savedDataUrl = localStorage.getItem(storageKey);
      if (savedDataUrl) {
        img.src = savedDataUrl;
        hidePicker();
        return;
      }

      const sources = (img.dataset.sources || "").split("|").filter(Boolean);
      let index = 0;

      const tryNextSource = () => {
        if (index >= sources.length) {
          showPicker();
          return;
        }

        img.src = sources[index++];
      };

      img.addEventListener("load", hidePicker);
      img.addEventListener("error", tryNextSource);
      tryNextSource();

      actionBtn.addEventListener("click", () => input.click());

      input.addEventListener("change", async (event) => {
        const file = event.target.files?.[0];
        if (!file) {
          return;
        }

        const dataUrl = await readAsDataUrl(file);
        localStorage.setItem(storageKey, dataUrl);
        img.src = dataUrl;
        hidePicker();
      });
    };

    document.querySelectorAll(".polaroid").forEach(setupPolaroid);

    const showHeartBurst = () => {
      const heartCount = 55;

      for (let i = 0; i < heartCount; i += 1) {
        const heart = document.createElement("span");
        heart.className = "heart-burst";
        heart.textContent = "üíñ";
        heart.style.left = `${Math.random() * 100}vw`;
        heart.style.top = `${Math.random() * 100}vh`;

        const dx = (Math.random() - 0.5) * 280;
        const dy = (Math.random() - 0.5) * 280;
        heart.style.setProperty("--dx", `${dx}px`);
        heart.style.setProperty("--dy", `${dy}px`);
        heart.style.animationDelay = `${Math.random() * 0.2}s`;

        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 2000);
      }
    };

    yes.addEventListener("click", () => {
      msg.textContent = "Ich freue mich schon auf unser Date. Ich lade dich hiermit zu einer Paarmassage und zum anschlie√üenden Dinner in Bielefeld ein. Sei um 16 Uhr bei mir";
      no.style.display = "none";
      yes.textContent = "üíñ";
      showHeartBurst();
    });

    no.addEventListener("click", () => {
      no.style.display = "none";
      msg.textContent = "Ein nein gibt es nicht, du schuldest mir nun eine Massage üòè";
    });
  </script>
</body>
</html>
